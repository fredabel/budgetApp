<!DOCTYPE html>
  <html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
		<!--Import Google Icon Font-->
		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
		<!--Import materialize.css-->
		<link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>
		<link type="text/css" rel="stylesheet" href="css/style.css"  media="screen,projection"/>

		
	
    </head>

    <body>
      
        <nav class="" role="navigation">
            <div class="nav-wrapper ">
                <a id="logo-container" href="dashboard.html" class="brand-logo center">
                    Gravity
                </a>
                <a href="#" data-target="nav-mobile" class="left-align sidenav-trigger show-on-large"><i class=" button-collapse material-icons">menu</i></a>
                <ul class="right">
                    <li><a href="index.html">Logout</a></li>
                </ul>
    
                <ul id="nav-mobile" class="sidenav">
                    <li><a href="home.html">Home</a></li>
                   
                </ul>
                
            </div>
        </nav>
		<div class="bg">
            <div class="row">
                <div class="col s6 m6 l3 ">
                    <div class="card center card-bg white-text transparent">
                        <div class="card-content">
                            <p>Users</p>
                            <h5>10</h5>
                            <i class="material-icons small green-text">keyboard_arrow_up</i>
                            <b class="green-text">%12</b>
                        </div>
                    </div>
                    
                </div>
                <div class="col s6 m6 l3">
                    <div class="card center card-bg white-text transparent">
                        <div class="card-content">
                            <p>Users</p>
                            <h5>10</h5>
                            <i class="material-icons small green-text">keyboard_arrow_up</i>
                            <b class="green-text">%12</b>
                        </div>
                    </div>
                    
                </div>
                <div class="col s6 m6 l3">
                    <div class="card center card-bg white-text transparent">
                        <div class="card-content">
                            <p>Users</p>
                            <h5>10</h5>
                            <i class="material-icons small green-text">keyboard_arrow_up</i>
                            <b class="green-text">%12</b>
                        </div>
                    </div>
                    
                </div>
                <div class="col s6 m6 l3">
                    <div class="card center card-bg white-text transparent">
                        <div class="card-content">
                            <p>Users</p>
                            <h5>10</h5>
                            <i class="material-icons small green-text">keyboard_arrow_up</i>
                            <b class="green-text">%12</b>
                        </div>
                    </div>
                    
                </div>
                    
            </div>
         
            <!-- <div class="carousel">
                <a class="carousel-item" href="#one!"><img src="https://lorempixel.com/250/250/nature/1"></a>
                <a class="carousel-item" href="#two!"><img src="https://lorempixel.com/250/250/nature/2"></a>
                <a class="carousel-item" href="#three!"><img src="https://lorempixel.com/250/250/nature/3"></a>
                <a class="carousel-item" href="#four!"><img src="https://lorempixel.com/250/250/nature/4"></a>
                <a class="carousel-item" href="#five!"><img src="https://lorempixel.com/250/250/nature/5"></a>
            </div> -->
            <div class="row">
                <div class="col s12 m12 l4">
                    <div class="col s12 m6 l12">
                        <div class="card-panel  white-text">
                            <canvas id="myChart"></canvas>
                        </div>
                    </div>
                    <div class="col s12 m6 l12">
                        <div class="card-panel card-bg transparent">
                            <span class="white-text">I am a very simple card. I am good at containing small bits of information.
                            I am convenient because I require little markup to use effectively.
                            I am a very simple card. I am good at containing small bits of information.
                            I am convenient because I require little markup to use effectively. 
                            I am a very simple card. I am good at containing small bits of information.
                           
                            </span>
                        </div>
                    </div>
                </div>
                <div class="col s12 m12 l8">
                    <div class="col s12 m12">
                        <div class="card-panel ">
                            <h5>Manage Users</h5>
                            <br><br>
                            <div id="user-table">
                               
                            </div>
                            
                        </div>
                    </div>
                </div>
            </div>
          
                        
		</div>
		

	<!--JavaScript at end of body for optimized loading-->
	
    <script src="js/jquery.js"></script>
    <script src="js/materialize.js"></script>
    <script src="js/init.js"></script>
    <script src="js/chartjs/Chart.js"></script>

    <script>
        $(document).ready(function(){
            $('.carousel').carousel();

            var ctx = document.getElementById("myChart");
            
            var myChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ["January", "February", "March", "April", "May", "June", "July"],
                    datasets: [{
                        label: "My First dataset",
                        backgroundColor: '#36a2eb',
                        borderColor: '#36a2eb',
                        data: [1, 2, 3, 4, 3, 6, 7],
                        fill: false,
                      
                    }]
                },
                options: {
                    showLines: true, // disable for all datasets
                }
                
            });
            $.ajax({

                url: "http://10.196.43.160:80/api/manage_users",
                type: 'GET',
                dataType: "json",
                headers: {
                    "Authorization": "Bearer " + window.localStorage.getItem('token')

                },
                success: function(data)
                {   
                    alert(window.localStorage.getItem('token'));

                    var email;
                    var name;
                    var html;
                    var content;
                    html = '<thead><tr><th>Name</th><th>Email</th></tr></thead>';
                    content +='<tbody>';
                    $.each(data, function(i,val){

                        // console.log(val.length);
                        for(x=0; x < val.length; x++ ){

                            // console.log(val[$i].email)
                            name= '<td>'+val[x].name+'</td>';
                            email = '<td>'+val[x].email+'</td>';
                    
                           content += '<tr>'+name+email+'</tr>';
                       
                        }

                    });
                    content +='</tbody>';  
                    

                    $('#user-table').html('<table id="users-list" class="responsive-table "></table>');
                    $("#users-list").html(html);
                    $("#users-list").append(content);
                    
                        
                }
            });
           

        });
    </script>

	</body>
	
  </html>